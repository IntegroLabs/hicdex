spec_version: 1.0
package: hicdex

database:
  kind: sqlite
  path: hic_et_nunc.sqlite3

contracts:
  HEN_objkts:
    address: KT1RJ6PbjHpwc3M5rw5s2Nbmefwbuwbdxton
    typename: hen_objkts
  HEN_minter:
    address: KT1Hkg5qeNhfwpKW4fXvq7HGZB9z2EnmCCA9
    typename: hen_minter
  HEN_subjkts:
    address: KT1My1wDZHDGweCrJnQJi3wcFaS67iksirvj
    typename: hen_subjkt
  HDAO_curation:
    address: KT1TybhR7XraG75JFYKSrh7KnxukMBT5dor6
    typename: hdao_curation
  HDAO_ledger:
    address: KT1AFA2mwNUMNd4SsujE1YYp29vd8BZejyKW
    typename: hdao_ledger
  SPLIT_contract_sample_a:
    address: KT1JHdHohUVtwdrg2kvxveR4aH1fBJpi757p
    typename: split_contract_a
  OBJKTBID_english:
    address: ${OB_ENGLISH:-KT1TsZ5j6VkfWrYjt7jx4HKnSyrpNT4Y1cEv}
    typename: objktbid_english
  OBJKTBID_dutch:
    address: ${OB_DUTCH:-KT19cc5G9XFVwoePxtKbjA5R7U8qSpZSJiry}
    typename: objktbid_dutch
  OBJKTBID_marketplace:
    address: ${OB_MARKETPLACE:-KT1Gy7NkvdQM5JSHmZL8LmVVmjEC6vLrXt4Z}
    typename: objktbid_marketplace

datasources:
  tzkt_mainnet:
    kind: tzkt
    url: ${TZKT_URL:-https://api.tzkt.io}
  tzkt_florencenet:
    kind: tzkt
    url: ${TZKT_TEST_URL:-https://api.florencenet.tzkt.io/}

indexes:    
  # hen_mainnet:
  #   kind: operation
  #   datasource: tzkt_mainnet
  #   types:
  #     - transaction
  #     - origination
  #   contracts:
  #     - HEN_minter
  #     - HEN_objkts
  #     - HEN_subjkts
  #     - HDAO_curation
  #     - HDAO_ledger
  #   handlers:
  #     - callback: on_mint
  #       pattern:
  #         - type: transaction
  #           destination: HEN_minter
  #           entrypoint: mint_OBJKT
  #         - type: transaction
  #           destination: HEN_objkts
  #           entrypoint: mint
  #     - callback: on_swap
  #       pattern:
  #         - type: transaction
  #           destination: HEN_minter
  #           entrypoint: swap
  #     - callback: on_cancel_swap
  #       pattern:
  #         - type: transaction
  #           destination: HEN_minter
  #           entrypoint: cancel_swap
  #     - callback: on_collect
  #       pattern:
  #         - type: transaction
  #           destination: HEN_minter
  #           entrypoint: collect

  #     - callback: on_transfer
  #       pattern:
  #         - type: transaction
  #           destination: HEN_objkts
  #           entrypoint: transfer
  #     - callback: on_registry
  #       pattern:
  #         - type: transaction
  #           destination: HEN_subjkts
  #           entrypoint: registry

  #     - callback: on_hdaol_batch
  #       pattern:
  #         - type: transaction
  #           destination: HDAO_ledger
  #           entrypoint: hDAO_batch
  #     - callback: on_hdaol_transfer
  #       pattern:
  #         - type: transaction
  #           destination: HDAO_ledger
  #           entrypoint: transfer

  #     - callback: on_hdaoc_claim
  #       pattern:
  #         - type: transaction
  #           destination: HDAO_curation
  #           entrypoint: claim_hDAO
  #     - callback: on_hdaoc_curate
  #       pattern:
  #         - type: transaction
  #           destination: HDAO_curation
  #           entrypoint: curate

  # split_contract_a:
  #   kind: operation
  #   datasource: tzkt_mainnet
  #   types:
  #     - transaction
  #     - origination
  #   handlers:
  #     - callback: on_split_contract_origination_a
  #       pattern:
  #         - type: origination
  #           similar_to: SPLIT_contract_sample_a
  #   stateless: True

  # objkt_operator:
  #   kind: big_map
  #   datasource: tzkt_mainnet
  #   handlers:
  #     - callback: on_operator_update
  #       contract: HEN_objkts
  #       path: operators
  
  objktbid_testnet:
    kind: operation
    datasource: tzkt_florencenet
    contracts:
      - OBJKTBID_english
      - OBJKTBID_dutch
      - OBJKTBID_marketplace
    handlers:
      - callback: on_create_english
        pattern:
          - type: transaction
            destination: OBJKTBID_english
            entrypoint: create_auction
      - callback: on_cancel_english
        pattern:
          - type: transaction
            destination: OBJKTBID_english
            entrypoint: cancel_auction
      - callback: on_conclude_english
        pattern:
          - type: transaction
            destination: OBJKTBID_english
            entrypoint: conclude_auction
      - callback: on_bid_english
        pattern:
          - type: transaction
            destination: OBJKTBID_english
            entrypoint: bid
      
      - callback: on_create_dutch
        pattern:
          - type: transaction
            destination: OBJKTBID_dutch
            entrypoint: create_auction
      - callback: on_cancel_dutch
        pattern:
          - type: transaction
            destination: OBJKTBID_dutch
            entrypoint: cancel_auction
      - callback: on_buy_dutch
        pattern:
          - type: transaction
            destination: OBJKTBID_dutch
            entrypoint: buy
      
      - callback: on_create_bid
        pattern:
          - type: transaction
            destination: OBJKTBID_marketplace
            entrypoint: bid
      - callback: on_create_ask
        pattern:
          - type: transaction
            destination: OBJKTBID_marketplace
            entrypoint: ask
      - callback: on_retract_bid
        pattern:
          - type: transaction
            destination: OBJKTBID_marketplace
            entrypoint: retract_bid
      - callback: on_retract_ask
        pattern:
          - type: transaction
            destination: OBJKTBID_marketplace
            entrypoint: retract_ask
      - callback: on_fulfill_bid
        pattern:
          - type: transaction
            destination: OBJKTBID_marketplace
            entrypoint: fulfill_bid
      - callback: on_fulfill_ask
        pattern:
          - type: transaction
            destination: OBJKTBID_marketplace
            entrypoint: fulfill_ask